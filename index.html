<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Адаптивный тренажёр набора текста</title>
    <style>
        body {
            background-color: #222;
            color: #ccc;
            font-family: "Courier New", Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
        }

        #timer {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        #text {
            font-size: 1.8rem;
            letter-spacing: 2px;
            text-align: center;
        }

        #text span {
            opacity: 0.3;
            transition: opacity 0.2s, color 0.2s;
        }

        /* Правильная буква */
        #text span.correct {
            opacity: 1;
            color: #fff;
        }

        /* Неправильная буква */
        #text span.incorrect {
            opacity: 1;
            color: red;
        }

        /* Начальное состояние */
        #text span.pending {
            opacity: 0.3;
        }

        /* Адаптивность для планшетов */
        @media (max-width: 768px) {
            #timer {
                font-size: 2.5rem;
            }

            #text {
                font-size: 2.5rem;
                letter-spacing: 2px;
            }
        }

        /* Адаптивность для мобильных устройств */
        @media (max-width: 480px) {
            #timer {
                font-size: 3rem;
            }

            #text {
                font-size: 3rem;
                letter-spacing: 2px;
            }
        }
    </style>
</head>

<body>
    <div id="timer">30</div>
    <div id="text"></div>

    <script>
        // Тестовый текст – измените по своему желанию
        const sampleText = "Быстрая коричневая лиса перепрыгнула через ленивую собаку.";

        let currentIndex = 0;
        let timerStarted = false;
        let remainingTime = 30;
        let timerInterval = null;

        const textContainer = document.getElementById('text');
        const timerDisplay = document.getElementById('timer');

        // Инициализация текста – оборачиваем каждый символ в <span>
        function initText() {
            textContainer.innerHTML = "";
            currentIndex = 0;
            sampleText.split('').forEach(char => {
                const span = document.createElement('span');
                span.textContent = char;
                span.classList.add('pending');
                textContainer.appendChild(span);
            });
        }

        // Запуск таймера (30 секунд)
        function startTimer() {
            timerInterval = setInterval(() => {
                remainingTime--;
                timerDisplay.textContent = remainingTime;
                if (remainingTime <= 0) {
                    clearInterval(timerInterval);
                    document.removeEventListener('keydown', handleKeyDown);
                    alert('Время вышло!');
                }
            }, 1000);
        }

        // Обработка ввода с клавиатуры
        function handleKeyDown(e) {
            // Обработка удаления символа
            if (e.key === "Backspace") {
                if (currentIndex > 0) {
                    currentIndex--;
                    const spans = textContainer.querySelectorAll('span');
                    const currentSpan = spans[currentIndex];
                    currentSpan.classList.remove('correct', 'incorrect');
                    currentSpan.classList.add('pending');
                }
                return;
            }

            // Игнорируем системные клавиши (например, Shift, Ctrl, Alt)
            if (e.key.length !== 1) return;

            // Запуск таймера при первом вводе
            if (!timerStarted) {
                timerStarted = true;
                startTimer();
            }

            const spans = textContainer.querySelectorAll('span');
            // Если символы кончились – ничего не делаем
            if (currentIndex >= spans.length) return;

            const currentSpan = spans[currentIndex];
            const expectedChar = currentSpan.textContent;

            // Сравнение введённого символа с ожидаемым
            if (e.key === expectedChar) {
                currentSpan.classList.remove('pending');
                currentSpan.classList.add('correct');
            } else {
                currentSpan.classList.remove('pending');
                currentSpan.classList.add('incorrect');
            }

            currentIndex++;
        }

        // Инициализация при загрузке страницы
        initText();
        // Обработчик клавиатуры
        document.addEventListener('keydown', handleKeyDown);
    </script>
</body>

</html>